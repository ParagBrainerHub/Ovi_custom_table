<div *ngIf="isPageLoading" class="skeleton-loader"></div>

<button
  *ngIf="!isPageLoading"
  (click)="handleClick($event)"
  class="custom-button mat-button"
  [ngStyle]="getButtonStyle()"
  [ngClass]="{
    elevated: shadow,
    flat: !shadow,
    transparent: transparent,
  }"
  (mouseenter)="hover = true"
  (mouseleave)="hover = false"
  [ngStyle]="hover ? getHoverStyle() : getButtonStyle()"
>
  <!-- Left-aligned icon or spinner -->
  <span *ngIf="iconPosition === 'left'" class="button-content left">
    <ng-container *ngIf="loadingData; else showIconContent">
      <mat-progress-spinner
        class="spinner"
        mode="indeterminate"
        [diameter]="24"
        [strokeWidth]="3"
      ></mat-progress-spinner>
    </ng-container>
    <ng-template #showIconContent>
      <mat-icon *ngIf="showIcon">{{ icon }}</mat-icon>
    </ng-template>
  </span>

  <!-- Button text -->
  <span *ngIf="iconPosition !== 'full'" class="button-text">{{ text }}</span>

  <!-- Right-aligned icon or spinner -->
  <span *ngIf="iconPosition === 'right'" class="button-content right">
    <ng-container *ngIf="loadingData; else showIconContent">
      <mat-progress-spinner
        class="spinner"
        mode="indeterminate"
        [diameter]="24"
        [strokeWidth]="3"
      ></mat-progress-spinner>
    </ng-container>
    <ng-template #showIconContent>
      <mat-icon *ngIf="showIcon">{{ icon }}</mat-icon>
    </ng-template>
  </span>

  <!-- Top-aligned icon or spinner -->
  <span *ngIf="iconPosition === 'top'" class="button-content top">
    <ng-container *ngIf="loadingData; else showIconContent">
      <mat-progress-spinner
        class="spinner"
        mode="indeterminate"
        [diameter]="24"
        [strokeWidth]="3"
      ></mat-progress-spinner>
    </ng-container>
    <ng-template #showIconContent>
      <mat-icon *ngIf="showIcon">{{ icon }}</mat-icon>
    </ng-template>
  </span>

  <!-- Bottom-aligned icon or spinner -->
  <span *ngIf="iconPosition === 'bottom'" class="button-content bottom">
    <ng-container *ngIf="loadingData; else showIconContent">
      <mat-progress-spinner
        class="spinner"
        mode="indeterminate"
        [diameter]="24"
        [strokeWidth]="3"
      ></mat-progress-spinner>
    </ng-container>
    <ng-template #showIconContent>
      <mat-icon *ngIf="showIcon">{{ icon }}</mat-icon>
    </ng-template>
  </span>
</button>

<!-- Validation message (optional) -->
<!-- <div *ngIf="!isValid" class="validation-error">
  Button must contain either an icon or text.
</div> -->
